
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¿ƒæƒ…æ—¥è¨˜</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#f8bbd0">
<style>
    body {
        font-family: "Microsoft JhengHei", sans-serif;
        background: linear-gradient(135deg, #ffd6e8, #f5d0fe);
        background-image: url('flowers-bg.png');
        background-size: 320px 320px;
        background-repeat: repeat;
        background-attachment: fixed;
        margin: 0;
        padding: 0;
        color: #5b2245;
    }
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: rgba(255,255,255,0.85);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border-radius: 0 0 20px 20px;
    }
    header h1 {
        font-size: 26px;
        margin: 0;
        color: #d81b60;
    }
    header button {
        background: linear-gradient(135deg, #ffb6c1, #ff80ab);
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        color: white;
        cursor: pointer;
        font-size: 14px;
    }
    .container {
        padding: 20px;
        max-width: 800px;
        margin: auto;
    }
    .card {
        background: rgba(255,255,255,0.92);
        border-radius: 20px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        border: 2px solid transparent;
        background-image: linear-gradient(white, white), linear-gradient(135deg, #f8bbd0, #f5d0fe);
        background-origin: border-box;
        background-clip: content-box, border-box;
    }
    h2 {
        font-size: 20px;
        margin-top: 0;
    }
    textarea, input {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border-radius: 10px;
        border: 1px solid #ffb6c1;
        font-size: 14px;
    }
    button {
        background: linear-gradient(135deg, #ffb6c1, #ff80ab);
        border: none;
        padding: 6px 12px;
        border-radius: 15px;
        cursor: pointer;
        color: white;
        margin-top: 5px;
        font-size: 14px;
    }
    button:hover {
        transform: scale(1.05);
        transition: 0.2s;
    }
    .emoji-btn {
        font-size: 26px;
        padding: 8px;
        background: white;
        border-radius: 50%;
        cursor: pointer;
        margin: 5px;
        border: 2px solid #f8bbd0;
        transition: 0.2s;
    }
    .emoji-btn:hover {
        transform: scale(1.2);
        background: #fce4ec;
    }
    .todo-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #fce4ec;
        padding: 6px 10px;
        border-radius: 12px;
        margin-top: 5px;
    }
    .todo-item.completed {
        text-decoration: line-through;
        color: gray;
    }
</style>
</head>
<body>

<header>
    <h1>ğŸŒ¸ å¿ƒæƒ…æ—¥è¨˜</h1>
    <button id="logoutBtn" onclick="logout()">ç™»å‡º</button>
</header>

<div class="container" id="loginPage">
    <div class="card">
        <h2>ç™»å…¥ / è¨»å†Š</h2>
        <input id="username" placeholder="å¸³è™Ÿ">
        <input id="password" type="password" placeholder="å¯†ç¢¼">
        <button onclick="login()">ç™»å…¥</button>
        <button onclick="register()">è¨»å†Š</button>
        <p id="loginMsg" style="color:red;"></p>
    </div>
</div>

<div class="container" id="diaryPage" style="display:none;">
    <div class="card">
        <h2>ğŸŒ¼ æ¯æ—¥å¿ƒæƒ…</h2>
        <input type="date" id="moodDate">
        <div>
            <button class="emoji-btn" onclick="selectMood(1)">ğŸ˜­</button>
            <button class="emoji-btn" onclick="selectMood(2)">ğŸ˜”</button>
            <button class="emoji-btn" onclick="selectMood(3)">ğŸ™‚</button>
            <button class="emoji-btn" onclick="selectMood(4)">ğŸ˜„</button>
            <button class="emoji-btn" onclick="selectMood(5)">ğŸ˜</button>
        </div>
        <input id="moodTag" placeholder="ä¸»é¡Œæ¨™ç±¤ï¼ˆå¯é¸ï¼‰">
        <textarea id="moodText" placeholder="æƒ³æ³•ï¼è¨˜éŒ„"></textarea>
        <button onclick="saveMood()">å„²å­˜å¿ƒæƒ…</button>
        <div id="moodList"></div>
    </div>

    <div class="card">
        <h2>ğŸ“‹ æ¯æ—¥ To-do List</h2>
        <input id="todoInput" placeholder="è¼¸å…¥å¾…è¾¦äº‹é …">
        <button onclick="addTodo()">æ–°å¢</button>
        <div id="todoList"></div>
    </div>

    <div class="card">
        <h2>ğŸ¯ çŸ­æœŸç›®æ¨™</h2>
        <input id="shortGoal" placeholder="è¼¸å…¥çŸ­æœŸç›®æ¨™">
        <button onclick="saveGoal('short')">å„²å­˜</button>
        <div id="shortGoalList"></div>
    </div>

    <div class="card">
        <h2>ğŸŒŸ é•·æœŸç›®æ¨™</h2>
        <input id="longGoal" placeholder="è¼¸å…¥é•·æœŸç›®æ¨™">
        <button onclick="saveGoal('long')">å„²å­˜</button>
        <div id="longGoalList"></div>
    </div>

    <div class="card">
        <h2>ğŸ’– æ¯æ—¥é¼“å‹µè‡ªå·±çš„ä¸€å¥è©±</h2>
        <input id="encourageInput" placeholder="è¼¸å…¥é¼“å‹µè‡ªå·±çš„è©±">
        <button onclick="saveEncourage()">å„²å­˜</button>
        <p id="encourageText"></p>
    </div>

    <div class="card">
        <h2>ğŸ’° æ¯æ—¥è¨˜å¸³</h2>
        <input id="moneyNote" placeholder="é …ç›®">
        <input id="moneyAmount" type="number" placeholder="é‡‘é¡">
        <button onclick="addMoney()">æ–°å¢è¨˜å¸³</button>
        <div id="moneyList"></div>
    </div>
</div>

<script>
let selectedMood = null;

function selectMood(score) {
    selectedMood = score;
}

function login() {
    let user = document.getElementById("username").value;
    let pass = document.getElementById("password").value;
    let savedUser = localStorage.getItem("diaryUser");
    let savedPass = localStorage.getItem("diaryPass");
    if (user === savedUser && pass === savedPass) {
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("diaryPage").style.display = "block";
        loadData();
    } else {
        document.getElementById("loginMsg").innerText = "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤";
    }
}

function register() {
    let user = document.getElementById("username").value;
    let pass = document.getElementById("password").value;
    if (!user || !pass) {
        document.getElementById("loginMsg").innerText = "è«‹è¼¸å…¥å¸³è™Ÿå’Œå¯†ç¢¼";
        return;
    }
    localStorage.setItem("diaryUser", user);
    localStorage.setItem("diaryPass", pass);
    document.getElementById("loginMsg").style.color = "green";
    document.getElementById("loginMsg").innerText = "è¨»å†ŠæˆåŠŸï¼Œè«‹é‡æ–°ç™»å…¥";
}

function logout() {
    document.getElementById("diaryPage").style.display = "none";
    document.getElementById("loginPage").style.display = "block";
}

function loadData() {
    document.getElementById("moodList").innerHTML = (JSON.parse(localStorage.getItem("moods")) || [])
        .map(m => `<div>${m.date} ${m.tag || ""} åˆ†æ•¸:${m.score} ${m.text}</div>`).join("");
    document.getElementById("shortGoalList").innerHTML = (JSON.parse(localStorage.getItem("shortGoals")) || []).map(g => `<div>${g}</div>`).join("");
    document.getElementById("longGoalList").innerHTML = (JSON.parse(localStorage.getItem("longGoals")) || []).map(g => `<div>${g}</div>`).join("");
    document.getElementById("todoList").innerHTML = (JSON.parse(localStorage.getItem("todos")) || []).map((t,i) => `<div class="todo-item ${t.done ? 'completed':''}" onclick="toggleTodo(${i})">${t.text} <button onclick="deleteTodo(${i});event.stopPropagation()">åˆªé™¤</button></div>`).join("");
    document.getElementById("moneyList").innerHTML = (JSON.parse(localStorage.getItem("money")) || []).map(m => `<div>${m.item} - $${m.amount}</div>`).join("");
    document.getElementById("encourageText").innerText = localStorage.getItem("encourage") || "";
}

function saveMood() {
    let date = document.getElementById("moodDate").value;
    let tag = document.getElementById("moodTag").value;
    let text = document.getElementById("moodText").value;
    if (!date || !selectedMood) return;
    let moods = JSON.parse(localStorage.getItem("moods")) || [];
    moods.push({ date, tag, score:selectedMood, text });
    localStorage.setItem("moods", JSON.stringify(moods));
    loadData();
}

function saveGoal(type) {
    let input = document.getElementById(type === "short" ? "shortGoal" : "longGoal");
    let goals = JSON.parse(localStorage.getItem(type === "short" ? "shortGoals" : "longGoals")) || [];
    if (!input.value) return;
    goals.push(input.value);
    localStorage.setItem(type === "short" ? "shortGoals" : "longGoals", JSON.stringify(goals));
    input.value = "";
    loadData();
}

function addTodo() {
    let todo = document.getElementById("todoInput").value;
    if (!todo) return;
    let todos = JSON.parse(localStorage.getItem("todos")) || [];
    todos.push({ text: todo, done:false });
    localStorage.setItem("todos", JSON.stringify(todos));
    document.getElementById("todoInput").value = "";
    loadData();
}

function toggleTodo(index) {
    let todos = JSON.parse(localStorage.getItem("todos")) || [];
    todos[index].done = !todos[index].done;
    localStorage.setItem("todos", JSON.stringify(todos));
    loadData();
}

function deleteTodo(index) {
    let todos = JSON.parse(localStorage.getItem("todos")) || [];
    todos.splice(index,1);
    localStorage.setItem("todos", JSON.stringify(todos));
    loadData();
}

function addMoney() {
    let item = document.getElementById("moneyNote").value;
    let amount = document.getElementById("moneyAmount").value;
    if (!item || !amount) return;
    let money = JSON.parse(localStorage.getItem("money")) || [];
    money.push({ item, amount });
    localStorage.setItem("money", JSON.stringify(money));
    document.getElementById("moneyNote").value = "";
    document.getElementById("moneyAmount").value = "";
    loadData();
}

function saveEncourage() {
    let text = document.getElementById("encourageInput").value;
    if (!text) return;
    localStorage.setItem("encourage", text);
    loadData();
}

if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
}
</script>
</body>
</html>
